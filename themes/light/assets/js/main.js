console.log('This site was generated by Hugo.');

const navButton = document.getElementById('hamburgerMenu');
const verticalNav = document.getElementById('verticalNav');
const horizontalNav = document.getElementById('horizontalNav');
const hListLines = horizontalNav.querySelectorAll('li') ;
const vListItems = verticalNav.querySelectorAll('li a');
const hListItems = horizontalNav.querySelectorAll('li a') ;


const toggleNavigation = () => {
  verticalNav.classList.toggle('hideVerticalNav');
  verticalNav.classList.toggle('showVerticalNav');
}

const openNavigation = () => {
  navButton.setAttribute('aria-expanded', 'true');
  toggleNavigation();
}

const closeNavigation = () => {
  navButton.setAttribute('aria-expanded', 'false');
  toggleNavigation();
}

const handleFocus = (e) => {
  if(e.currentTarget.parentElement) { e.currentTarget.parentElement.classList.add('verticalNavListFocused')}
}

const handleBlur = (e) => {
  if(e.currentTarget.parentElement) { e.currentTarget.parentElement.classList.remove('verticalNavListFocused')}
}

//close menu for vertical nav
const handleMenuExit = (e)  => {
  const navList = e.currentTarget.closest('.verticalNavList');
  if (!e.relatedTarget || !navList.contains(e.relatedTarget)) {
    closeNavigation();
  }
}

navButton.addEventListener('click', toggleNavigation);

// add event to the last item in the nav list to trigger the verticalNav to close if the user tabs out of the verticalNav
vListItems[vListItems.length - 1].addEventListener('blur', handleMenuExit);

vListItems.forEach((item) => {
  item.addEventListener('focus', handleFocus);
  item.addEventListener('blur', handleBlur);
})

hListItems.forEach((item) => {
  item.addEventListener('focus', handleFocus);
  item.addEventListener('blur', handleBlur);
})

hListLines.forEach((item) => {
  item.addEventListener('mouseover', (e) => e.currentTarget.firstElementChild.classList.add('nav-link-hovered'));
  item.addEventListener('mouseleave', (e) => e.currentTarget.firstElementChild.classList.remove('nav-link-hovered'));
})


// Close the verticalNav if a user presses the escape key
window.addEventListener('keyup', (e) => {
  if (e.key === 'Escape') {
    navButton.focus();
    closeNavigation();
  }
});